$( document ).ready(function() {

    $('.make_graph').click(function() {

        var $elem = $(this);
        var $attrib = $elem.attr("data-attrib");
        var $barCode = $elem.attr("data-barcode");
        var $targetElement = $('div[id="' + $attrib + '"]');
        var $url = $barCode + '/fromData/' + $attrib + '/date';

        $.ajax({
            url:$url,
            type: 'get',
            success: function(response) {
                console.log(response);
                $targetElement.addClass('graphDiv');
                var div = $targetElement[0];
                makePlotlyGraph(response,div);
            },
            error: function(response) {

            }
        });


    });



    function makePlotlyGraph(responseData,div){

        var data = [
            {
                x: responseData.x,
                y: responseData.y }
        ];

        var layout = {
            margin: {
                width: 500,
                height: 500,
                t: 10
            }
        };

        Plotly.newPlot(div,data,layout);
    }




});




// $(window).ready(function() {
//
//     var testDiv = $('#plotlyTestO7-01111')[0]; //add [0] to return the actual html dom object rather than jquery object
//     // var testDiv = document.getElementById('plotlyTestO7-01111');
//     var data = [
//         {"y":["0","1","2","3","4","5","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],"x":["2015-11-27 00:00:00.0","2015-11-28 00:00:00.0","2015-11-29 00:00:00.0","2015-11-30 00:00:00.0","2015-12-01 00:00:00.0","2015-12-02 00:00:00.0","2015-12-03 00:00:00.0","2015-12-04 00:00:00.0","2015-12-05 00:00:00.0","2015-12-06 00:00:00.0","2015-12-07 00:00:00.0","2015-12-08 00:00:00.0","2015-12-09 00:00:00.0","2015-12-10 00:00:00.0","2015-12-11 00:00:00.0","2015-12-15 00:00:00.0","2015-12-17 00:00:00.0","2015-12-18 00:00:00.0","2015-12-19 00:00:00.0","2015-12-20 00:00:00.0","2015-12-21 00:00:00.0","2015-12-22 00:00:00.0","2015-12-23 00:00:00.0","2015-12-24 00:00:00.0","2015-12-25 00:00:00.0","2015-12-26 00:00:00.0","2015-12-27 00:00:00.0","2015-12-28 00:00:00.0","2015-12-29 00:00:00.0","2015-12-30 00:00:00.0","2015-12-31 00:00:00.0","2016-01-05 00:00:00.0","2016-01-07 00:00:00.0","2016-01-08 00:00:00.0","2016-01-09 00:00:00.0","2016-01-10 00:00:00.0","2016-01-11 00:00:00.0","2016-01-12 00:00:00.0","2016-01-13 00:00:00.0","2016-01-14 00:00:00.0","2016-01-15 00:00:00.0","2016-01-16 00:00:00.0","2016-01-17 00:00:00.0","2016-01-18 00:00:00.0","2016-01-19 00:00:00.0","2016-01-20 00:00:00.0","2016-01-21 00:00:00.0","2016-01-22 00:00:00.0","2016-01-24 00:00:00.0","2016-01-25 00:00:00.0","2016-01-27 00:00:00.0","2016-01-28 00:00:00.0","2016-01-29 00:00:00.0","2016-01-30 00:00:00.0","2016-01-31 00:00:00.0","2016-02-02 00:00:00.0","2016-02-03 00:00:00.0","2016-02-04 00:00:00.0","2016-02-05 00:00:00.0","2016-02-06 00:00:00.0","2016-02-07 00:00:00.0","2016-02-08 00:00:00.0","2016-02-09 00:00:00.0","2016-02-10 00:00:00.0","2016-02-11 00:00:00.0","2016-02-12 00:00:00.0","2016-02-13 00:00:00.0","2016-02-14 00:00:00.0","2016-02-16 00:00:00.0","2016-02-17 00:00:00.0","2016-02-18 00:00:00.0","2016-02-19 00:00:00.0","2016-02-20 00:00:00.0","2016-02-21 00:00:00.0","2016-02-22 00:00:00.0","2016-02-23 00:00:00.0","2016-02-24 00:00:00.0","2016-02-25 00:00:00.0","2016-02-26 00:00:00.0","2016-02-27 00:00:00.0","2016-02-28 00:00:00.0","2016-02-29 00:00:00.0","2016-03-01 00:00:00.0","2016-03-02 00:00:00.0","2016-03-03 00:00:00.0","2016-03-04 00:00:00.0","2016-03-05 00:00:00.0","2016-03-07 00:00:00.0","2016-03-08 00:00:00.0","2016-03-09 00:00:00.0","2016-03-10 00:00:00.0","2016-03-11 00:00:00.0"]}    ];
//
//     var layout = {
//         margin: {
//             t: 10
//         }
//     };
//
//     Plotly.newPlot(testDiv,data,layout);
//
// });